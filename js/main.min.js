/*! project-name v0.0.1 | (c) 2020 Francuski Miroslav | MIT License | http://link-to-your-git-repo.com */
$(document).ready((function(){console.log("main.js file loaded")})),window.onload=function(){document.getElementById("click-me").addEventListener("click",e=>{e&&alert("You clicked me!")},!1);const e=document.getElementById("menu-btn"),t=document.getElementById("nav-list"),n=document.querySelector(".top-nav");e.addEventListener("click",()=>{e.classList.toggle("open"),t.classList.toggle("open")}),window.addEventListener("scroll",()=>{window.scrollY>0?n.classList.add("top-nav--sticky"):n.classList.remove("top-nav--sticky")});let o=document.getElementById("url-input");const l=document.getElementById("error-msg"),i=document.getElementById("short-links");function s(){return l.innerHTML="",(function(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(e)})(o.value)?(l.innerHTML="",l.style.display="none",o.classList.remove("error"),!0):(l.innerHTML="Please add a link",l.style.display="block",o.classList.add("error"),!1)}function c(){let e;return e=null==localStorage.getItem("items")?[]:JSON.parse(localStorage.getItem("items"))}function d(){i.innerHTML="",c().forEach(e=>{console.log(e),(function(e,t){i.insertAdjacentHTML("afterbegin",`\n  <div class="item">\n  <a href="${e}" class="item__link">${e}</a>\n  <div>\n  <a href="${t}" id="shortLink" class="item__shortlink">${t}</a>\n  <button id="copy" class="btn copy">Copy</button>\n  </div>\n  \n  </div>\n  `)})(e.link,e.shortLink),document.querySelectorAll("#copy").forEach(e=>e.addEventListener("click",a))})}function a(e){let t=document.createElement("textarea");t.value=e.target.previousSibling.previousSibling.innerText,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),e.target.innerHTML="Copied!",e.target.classList.add("copied-btn")}document.getElementById("addUrl").addEventListener("submit",(function(e){e.preventDefault(),s(),s()&&fetch("https://rel.ink/api/links/",{method:"POST",body:JSON.stringify({url:o.value}),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),(function(e,t){var n="https://rel.ink/"+t;console.log(e),console.log(n),(function(e){let t=c();t.push(e),console.log(t),localStorage.setItem("items",JSON.stringify(t)),d()})({link:e,shortLink:n})})(o.value,e.hashid)}).catch(e=>console.log(e))})),d()};